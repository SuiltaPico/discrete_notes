#面向对象

## 类
类把事物抽象成属性和方法，通常作为相同特征的一类事物的抽象。类描述了对象必须拥有的属性和方法。
* **属性**：类中定义的变量，用于存储对象的状态信息。
* **方法**：类中定义的函数，用于表达对象的行为或操作数据。

**类型特征**：
类在类型上，更像是一种抽象的约束了特定键值对的 `Map<id, 属性|方法>` 类型。

**在面向对象中的重要性**：
类是面向对象编程中的一个核心概念，是面向对象的必要概念。
##### 示例
我们可以为“狗”、“学生”、“电风扇”等事物定一个类。

让我们来专注于狗类的构筑。

狗类具有的属性：
* 名称
狗类具有的方法：
* 发出叫声

在 Java 可以写成这样：
```java
// 狗类的定义
class Dog {
	String name; // 名称
	
	String cry(){ // 被命令时发出“汪”的叫声
		return "汪";
	}

	// ...
}
```

### 多态
多态是指允许不同的类（可能是某个类的子类）的对象对相同的方法调用做出不同的响应。这通常是通过继承和方法覆盖（在子类中重新定义父类的方法）来实现的。

**示例解释**：
定义动物类、猫类和狗类，动物类具有“发出叫声”方法，猫类和狗类都以不同的形式实现/覆写了这个方法。以下是上述描述的伪代码：

```
class Animal {
  String cry
}

class Cat extends Animal {
  String cry() { return "meow" }
}

class Dog extends Animal {
  String cry() { return "woof" }
}

Animal cat = new Cat
Animal dog = new Dog

assert(cat.cry != dog.cry)
```

这种同一个类但不同实现是被允许的特征，就成为多态。

**拥有多态特征的好处**：
多态的特征其实是一种约束，多态允许了一个类的方法的不同实现，但是也限制了子类必须严格按照签名来实现这个方法。相同的方法签名可以让我们的开发更加便利，避免情况。

### 继承
在面向对象编程中，继承确实意味着子类（派生类）A 将拥有基类（超类）B 的所有属性和方法，并且可以在保持依据签名调用的作用不变的情况下覆写这些方法。

继承的好处在于可以不用重复写多个相同的字段，只需要写一个就好了。

**示例解释**：
定义用户类和管理员类，管理员类继承用户类。
```
class User {
	name: String
	sayName() {
		return this.name;
	}
	changeName(newName: String) {
		this.name = newName;
	}
}

class Admin extends User {
	// 覆写 User 类提供的 changeName 方法
	changeName(newName: String) {
		this.name = "Admin:" + newName;
	}
	
	// 添加新方法
	banUser(name: String) {
		// 屏蔽用户的实现...
	}
}

Admin admin = new Admin(/* ... */)
// 能调用自己覆写、添加的方法，也能调用未覆盖的父类的方法
admin.changeName("root")
admin.sayName() // => Admin:root
admin.banUser("test")
```

**继承带来的麻烦**：
1. **多特征问题**（多继承问题）
	继承代表着新类完全扩展自父类。当我们有多个父类的时候，有可能会出现属性、名称的类型冲突，这将导致新类不是每个父类的子类，更像是一个重新组合出的类。
	
	例如，A 类定义了属性 `id: number`，B 类定义了属性 `id: String`，当我们同时继承A、B的时候，就会出现这种冲突。
	
	在现实生活中，总是会有多特征的需求，例如一个人既可以是“公司员工”、也可以是“司机、回到家可以是父亲、还有可能有”钓鱼爱好者“的特征。现实生活的特征标记是个有向无环图，是“组合”的，面向对象的继承无法直接处理这种问题。
2. **类型永远在扩张，而无法收缩**
	继承永远在使类的细节增多。到最后可能要为了某个简单的功能，而继承大量无用的属性和方法。
	
	例如我们需要复用类的一个功能，这个类的功能耦合了大量不相干的东西，我们最后把别人的整个基类的不需要的复杂逻辑带了进来。
3. **构造函数的顺序问题**

### 聚合
面向对象编程分类聚合了子程序和全局变量，减少了维护成本。

### 接口限制
面向对象编程可以隐藏不该展露出来的属性。

